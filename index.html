<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sonsuza Dek Biz | 03.04.2025</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&family=Dancing+Script:wght@700&display=swap');
        body { margin: 0; background: #0f0f0f; color: #fff; font-family: 'Poppins', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        #login-screen, #start-screen, #clip-container, #note-screen { text-align: center; padding: 30px; background: rgba(25, 25, 25, 0.98); border-radius: 35px; border: 1px solid #ff4081; box-shadow: 0 0 40px rgba(255, 64, 129, 0.2); width: 90%; max-width: 800px; transition: all 0.8s ease; box-sizing: border-box; position: absolute; }
        #start-screen, #clip-container, #note-screen { display: none; }
        .milat-baslik { font-family: 'Dancing Script', cursive; font-size: 2.8rem; color: #ff4081; margin-bottom: 10px; display: block; }
        #timer { font-size: 1.4rem; color: #ff80ab; font-weight: 600; display: block; margin-top: 10px; letter-spacing: 1px; }
        .media-box { width: 100%; height: 400px; background: #000; border-radius: 20px; display: flex; justify-content: center; align-items: center; overflow: hidden; border: 2px solid #222; position: relative; }
        .myMedia { display: none; max-width: 100%; max-height: 100%; object-fit: contain; animation: sinematikGecis 1.2s ease-in-out; }
        @keyframes sinematikGecis { from { opacity: 0; transform: scale(1.05); } to { opacity: 1; transform: scale(1); } }
        .text-area { margin-top: 25px; min-height: 80px; font-size: 1.2rem; font-weight: 300; color: #ff80ab; font-style: italic; text-shadow: 0 0 15px rgba(255,128,171,0.3); padding: 0 10px; }
        .heart-btn { background: #ff4081; color: white; border: none; padding: 15px 35px; border-radius: 50px; cursor: pointer; font-size: 1.1rem; font-weight: 600; box-shadow: 0 5px 25px rgba(255, 64, 129, 0.4); transition: 0.4s; text-transform: uppercase; margin: 5px; }
        .heart-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(255, 64, 129, 0.6); }
        input, textarea { background: #1a1a1a; border: 1px solid #ff4081; color: white; padding: 15px; border-radius: 20px; width: 80%; text-align: center; font-size: 1.1rem; outline: none; margin-bottom: 15px; }
        textarea { height: 100px; resize: none; font-family: 'Poppins', sans-serif; }
        #notes-list { max-height: 200px; overflow-y: auto; margin-top: 20px; text-align: left; padding: 10px; border-top: 1px solid #333; }
        .note-item { background: rgba(255, 64, 129, 0.1); padding: 10px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid #ff4081; font-size: 0.9rem; }
        .note-date { font-size: 0.7rem; color: #ff80ab; display: block; margin-bottom: 5px; }
        @media (max-width: 600px) { .media-box { height: 300px; } .milat-baslik { font-size: 2.2rem; } }
    </style>
</head>
<body>

    <div id="login-screen">
        <h2 style="font-family: 'Dancing Script', cursive; font-size: 3rem; margin-bottom: 20px;">Kalbimin Anahtarı? ❤️</h2>
        <input type="password" id="passInput" placeholder="Sadece Bize Özel Şifre...">
        <br>
        <button class="heart-btn" onclick="checkPassword()">Aşkımızın Kapısını Arala</button>
    </div>

    <div id="start-screen">
        <div id="counter-area">
            <span class="milat-baslik">Yolculuğumuzun İlk Nefesi...</span>
            <p style="font-size: 1.1rem; opacity: 0.8; margin: 0;">Ruhumun evini bulduğu o mucizevi günden beri tam;</p>
            <span id="timer"></span>
            <p style="font-size: 1.1rem; opacity: 0.8; margin: 0;">geçti.</p>
        </div>
        <br>
        <button class="heart-btn" onclick="startStory()">Anılarımıza Yolculuk Yap✨</button>
    </div>

    <div id="clip-container">
        <div class="media-box">
            <img src="resim1.jpeg" class="myMedia">
            <img src="resim2.jpeg" class="myMedia">
            <img src="resim3.jpeg" class="myMedia">
            <img src="resim4.jpeg" class="myMedia">
            <img src="resim5.jpeg" class="myMedia">
            <img src="resim6.jpeg" class="myMedia">
            <img src="resim7.jpeg" class="myMedia">
            <img src="resim8.jpeg" class="myMedia">
            <img src="resim9.jpeg" class="myMedia">
            <img src="resim10.jpeg" class="myMedia">
            <img src="resim11.jpeg" class="myMedia">
            <img src="resim12.jpeg" class="myMedia">
            <img src="resim13.jpeg" class="myMedia">
            <video class="myMedia" id="myVid" playsinline muted><source src="video.mp4" type="video/mp4"></video>
            <img src="resim14.jpeg" class="myMedia">
        </div>
        <div id="message-text" class="text-area"></div>
        <audio id="mainMusic" src="muzik.mp3" loop></audio>
    </div>

    <div id="note-screen">
        <h2 class="milat-baslik">Geleceğimize Not Bırak</h2>
        <textarea id="noteInput" placeholder="Buraya kalbinden geçenleri yaz sevgilim..."></textarea>
        <br>
        <button class="heart-btn" onclick="saveNote()">Notu Kaydet ❤️</button>
        <button class="heart-btn" onclick="closeNoteScreen()" style="background: #333;">Geri Dön</button>
        <div id="notes-list"></div>
    </div>

    <script>
        const TANIŞMA_TARİHİ = "2025-04-03"; 
        const mesajlar = [
            "Henüz birbirimizden habersizken bile kalplerimiz bu gün için atıyormuş...",
            "Daha 'biz' olmadan önce çekilen bu kare, hayatımın en güzel dönüm noktasıymış.",
            "'Gözleriniz birbirine ne kadar benziyor' dedikleri o gün, ruhlarımızın benzerliğini keşfetmiştik.",
            "Bakmaya doyamadığım her karemizde, dünyam seninle daha parlak görünüyor.",
            "Sadece bir fotoğraf değil, senin yanında kendimi bulduğum bir sığınak bu.",
            "Zamanın durmasını istediğim binlerce andan sadece biri...",
            "Sen benim en güzel manzaramsın, her bakışta yeniden huzur bulduğum.",
            "Birlikte çocuk gibi eğlenebildiğim tek insan olman ne büyük şans!",
            "Aşk sadece el ele tutuşmak değil, saçmalarken bile aynı ritimde olmaktır.",
            "Gülüşünün içinde saklı olan o neşe, en kötü günümün bile ilacı.",
            "Seninle gülmekten yorulmak, hayatın bana sunduğu en güzel yorgunluk.",
            "Dünyanın en komik ama en romantik sahnelerinin başrolü her zaman biziz.",
            "Aynı renklere gönül vermek, aynı heyecanla birleşmek... Galibiyetimiz hep 'biz' olalım.",
            "Dünyaya senin gözlerinden bakmak, gördüğüm en güzel gerçeklik.",
            "Tüm dileklerinin gerçek olduğu, hayallerimizle süslü nice mutlu senelerimize ömrümmmmm!"
        ];

        const mainMusic = document.getElementById('mainMusic');
        let currentIndex = 0;

        function checkPassword() {
            if(document.getElementById('passInput').value === "2240") {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('start-screen').style.display = 'block';
                updateTimer();
                setInterval(updateTimer, 1000);
            } else { alert("Hatalı şifre hayatım!"); }
        }

        function updateTimer() {
            const start = new Date(TANIŞMA_TARİHİ);
            const now = new Date();
            const diff = now - start;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const mins = Math.floor((diff / 1000 / 60) % 60);
            const secs = Math.floor((diff / 1000) % 60);
            document.getElementById('timer').innerText = `${days} Gün, ${hours} Saat, ${mins} Dakika, ${secs} Saniye`;
        }

        function startStory() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('clip-container').style.display = 'block';
            mainMusic.volume = 1;
            mainMusic.play();
            showNext();
            launchConfetti();
        }

        function showNext() {
            let media = document.getElementsByClassName("myMedia");
            let textDiv = document.getElementById("message-text");

            if (currentIndex >= media.length) {
                textDiv.innerHTML = `Sonsuza dek seninle... ❤️ <br><br> 
                    <button class='heart-btn' onclick='restartStory()' style='font-size: 0.8rem;'>Baştan İzle</button>
                    <button class='heart-btn' onclick='openNoteScreen()' style='font-size: 0.8rem; background: #ad1457;'>Geleceğe Not Bırak</button>`;
                return;
            }

            for (let i = 0; i < media.length; i++) { 
                media[i].style.display = "none"; 
                if(media[i].tagName === "VIDEO") media[i].pause(); 
            }

            let currentItem = media[currentIndex];
            currentItem.style.display = "block";
            textDiv.innerHTML = mesajlar[currentIndex];
            currentIndex++;

            if (currentItem.tagName === "VIDEO") {
                currentItem.currentTime = 0; 
                currentItem.play();
                currentItem.onended = () => showNext();
            } else {
                setTimeout(showNext, 6000); 
            }
        }

        function openNoteScreen() {
            document.getElementById('clip-container').style.display = 'none';
            document.getElementById('note-screen').style.display = 'block';
            displayNotes();
        }

        function closeNoteScreen() {
            document.getElementById('note-screen').style.display = 'none';
            document.getElementById('clip-container').style.display = 'block';
        }

        function saveNote() {
            const noteText = document.getElementById('noteInput').value;
            if(!noteText.trim()) return alert("Lütfen bir şeyler yaz sevgilim...");
            const notes = JSON.parse(localStorage.getItem('ask_notlari') || "[]");
            notes.unshift({ text: noteText, date: new Date().toLocaleString('tr-TR') });
            localStorage.setItem('ask_notlari', JSON.stringify(notes));
            document.getElementById('noteInput').value = "";
            displayNotes();
            launchConfetti();
        }

        function displayNotes() {
            const notes = JSON.parse(localStorage.getItem('ask_notlari') || "[]");
            document.getElementById('notes-list').innerHTML = notes.map(n => `
                <div class="note-item"><span class="note-date">${n.date}</span>${n.text}</div>
            `).join('');
        }

        function restartStory() {
            currentIndex = 0;
            document.getElementById('clip-container').style.display = 'none';
            document.getElementById('start-screen').style.display = 'block';
            mainMusic.currentTime = 0;
            mainMusic.play();
        }

        function launchConfetti() {
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
        }
    </script>
</body>
</html>
